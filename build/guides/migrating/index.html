<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<link href="/stylesheets/site.css?1312605588" media="screen" rel="stylesheet" type="text/css">
<title>Middleman: Migrating to Middleman 2.0</title>
</head>
<body>
    <div id="frame">
      <div class="container">
        <aside><header><h1><a href="/">Middleman</a></h1>
            <h4>Hand-crafted frontend development</h4>
          </header><nav><ul>
<li><a href="/guides/getting-started">Getting Started</a></li>
              <li><a href="/guides/migrating">Migrating to Middleman 2.0</a></li>
              <li><a href="/guides/templates-layouts-partials">Templates, Layouts &amp; Partials</a></li>
              <li><a href="/guides/sass-and-compass">Sass and Compass</a></li>
              <li><a href="/guides/coffeescript-sprockets">CoffeeScript &amp; Sprockets</a></li>
              <li><a href="/guides/dynamic-pages">Dynamic Pages</a></li>
              <li><a href="/guides/pretty-urls">Pretty URLs</a></li>
              <li><a href="/guides/frontend-optimization">Frontend Optimization</a></li>
              <li><a href="/guides/individual-page-configuration">Individual Page Configuration</a></li>
              <li><a href="/guides/livereload">LiveReload</a></li>
              <li><a href="/guides/local-yaml-data">Local YAML Data</a></li>
              <li><a href="/guides/extensions">Custom Extensions</a></li>
              <li><a href="/guides/rack-middleware">Rack Middleware</a></li>
              <li class="div"><a href="/built-using-middleman">Sites Built Using Middleman</a></li>
            </ul></nav><footer><p>Â© 2011 <a href="http://awardwinningfjords.com">Thomas Reynolds</a>.<br>
            Middleman is open-source software licensed under the <a href="https://github.com/tdreyno/middleman/blob/master/LICENSE">MIT License</a>.</p> </footer></aside><article id="main" role="main"><h1>Migrating to Middleman 2.0</h1>

<p>In addition to dozens of new features, Middleman 2.0 has several changes to the way earlier versions managed projects.</p>

<h2>Unified middleman command</h2>

<p>In previous versions, Middleman shipped with 3 commands: <code>mm-init</code>, <code>mm-server</code> and <code>mm-build</code>. These tools were responsible for the 3 phases of project development: creation, construction and compilation. In version 2.0, these 3 commands (along with a new migrate command) have been unified into a single command. These change was made to make the name of the command, <code>middleman</code>, more obvious than the abbreviated mm- prefix and to follow the lead of the Rails and Compass projects which uses a unified <code>rails</code> and <code>compass</code> command respectively.</p>

<p>For the 2.0 series, the three old command will still be available to allow users time to migrate their scripts, tutorials and muscle memory to the new commands. In a future 2.x, these commands will be removed and only the new middleman command will be available.</p>

<p>As of 2.0, the following commands are possible:</p>

<ul>
<li><code>middleman init NEW_PROJECT_FOLDER</code></li>
<li><code>middleman server</code></li>
<li><code>middleman build</code></li>
<li><code>middleman migrate</code></li>
<li><code>middleman version</code></li>
</ul>
<h2>Unified Source Folder</h2>

<p>One of the biggest changes with Middleman 2.0 is the unification of both static files and template files into a single source folder.</p>

<p>In Middleman version 1, projects contained a <code>public</code> folder for static resources (images, javascripts and stylesheets) and a <code>views</code> folder for templated files (erb, haml, sass, coffee).</p>

<p>This awkward split is a remnant of the way Rails 3.0 and earlier divided files into static and templated content. This split, and the poor naming, caused problems for new users. Therefore, Middleman 2.0 has combined these folders into a single <code>source</code> folder. The entirety of your project, both static and templated files, live along side each other.</p>

<p>Middleman 2.0 does not offer a backwards compatibility mode. Old project must merge their folders to update Middleman. The process for doing this is fairly simple. From the terminal:</p>

<div class="highlight"><pre><span class="nb">cd </span>MY_PROJECT_FOLDER
mv public <span class="nb">source</span>
cp -R views/* <span class="nb">source</span>/
rm -rf views
</pre></div>


<p>As a convenience, Middleman 2.0 comes with a single command for running this migration.</p>

<div class="highlight"><pre><span class="nb">cd </span>MY_PROJECT_FOLDER
middleman migrate
</pre></div>


<h2>Removed/Deprecated Methods</h2>

<p>Some methods which have been renamed or deprecated for a long time have finally been removed.</p>

<h3>enable -&gt; activate</h3>

<p>In your <code>config.rb</code>, you should be using activate to enable features like so:</p>

<div class="highlight"><pre><span class="n">activate</span> <span class="ss">:relative_assets</span>
</pre></div>


<p>In the past, <code>enable</code> also worked. This old name has been removed. Always use <code>activate</code>.</p>

<h3>mime (add new mime types)</h3>

<p>This method allowed the addition of new mime types to Middleman. This is now available higher up the stack, provided by Sinatra, as <code>mime_type</code>. Use as before:</p>

<div class="highlight"><pre><span class="n">mime_type</span> <span class="s2">"pdf"</span><span class="p">,</span> <span class="s2">"application/pdf"</span>
</pre></div>


<h2>Removed Features</h2>

<p>One, rarely used, feature has been removed.</p>

<h3>Ugly Haml</h3>

<p>The Ugly Haml feature told Haml to output unindented text. This was useful as a means of obfuscation. The <code>ugly_haml</code> feature has been removed from Middleman 2.0, but you can still achieve the same effect by setting the Haml options directly:</p>

<div class="highlight"><pre><span class="n">set</span> <span class="ss">:haml</span><span class="p">,</span> <span class="p">{</span> <span class="ss">:ugly</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="p">}</span>
</pre></div>

<footer><a href="https://github.com/tdreyno/middleman-guides/blob/master/source/guides/migrating.html.markdown">Fork and edit this guide on Github</a></footer></article>
</div>
    </div>
<script src="/javascripts/site.js?1312605588" type="text/javascript"></script><!-- Google Analytics --><script type="text/javascript">  var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-90027-21']);  _gaq.push(['_trackPageview']);  (function() {    var ga = document.createElement('script');    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';    ga.setAttribute('async', 'true');    document.documentElement.firstChild.appendChild(ga);  })();</script>
</body>
</html>
